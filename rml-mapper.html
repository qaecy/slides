<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>QAECY - RML Mapper</title>

    <link rel="icon" type="image/x-icon" href="favicon.ico" />

    <link
      href="https://fonts.googleapis.com/css?family=Poppins"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/qaecy.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" />

    <!-- Cue theme -->
    <link rel="stylesheet" href="dist/js/cue-ui/theme/main.scss" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <img src="dist/img/logo.svg" alt="" />
          <p>your knowledge, accessible</p>
        </section>

        <!-- Intro -->
        <section>
          <section>
            <h2>RML Mapper</h2>
          </section>

          <section>
            <p>
              In the <a href="./table-vs-graph.html">Table vs. Graph</a> slide
              deck we learned what table data looks like when represented in a
              graph.
            </p>
          </section>

          <section>
            <p>
              <strong>Purpose:</strong> Formalize the inherent structure of a
              dataset and make it machine-readable, so it can be
              <em>queried in the context of other information</em>.
            </p>
          </section>

          <section>
            <p>
              One way to achieve this is to implement a custom parser in a
              programming language of choice. However, such parsers are not
              easily portable or reusable across different systems.
            </p>
          </section>

          <section>
            <p>
              In this guide we will explore how to use Cue's RML Mapper to
              transform data into RDF graphs.
            </p>
          </section>

          <section data-background-iframe="https://rml.io/specs/rml/"></section>

          <section data-background-iframe="https://rml.io/yarrrml/">
            <p class="bg-transparent-white">
              For easier readability we use the YARRRML to represent the rules
            </p>
          </section>
        </section>

        <!-- Purpose -->
        <section>
          <section>
            <h2>Purpose</h2>
          </section>

          <section>
            <img
              src="dist/img/idlab/KGGenerationStep1a.svg"
              style="height: 50vh"
            />
            <div class="reference">
              https://dylanvanassche.be/assets/leveraging-wot-for-kg-generation
            </div>
          </section>

          <section>
            <img
              src="dist/img/idlab/KGGenerationStep1b.svg"
              style="height: 50vh"
            />
            <div class="reference">
              https://dylanvanassche.be/assets/leveraging-wot-for-kg-generation
            </div>
          </section>

          <section>
            <img
              src="dist/img/idlab/KGGenerationStep2a.svg"
              style="height: 50vh"
            />
            <div class="reference">
              https://dylanvanassche.be/assets/leveraging-wot-for-kg-generation
            </div>
          </section>

          <section>
            <img
              src="dist/img/idlab/KGGenerationStep2b.svg"
              style="height: 50vh"
            />
            <div class="reference">
              https://dylanvanassche.be/assets/leveraging-wot-for-kg-generation
            </div>
          </section>

          <section>
            <img
              src="dist/img/idlab/KGGenerationStep3a.svg"
              style="height: 50vh"
            />
            <div class="reference">
              https://dylanvanassche.be/assets/leveraging-wot-for-kg-generation
            </div>
          </section>

          <!-- <section>
            <img src="dist/img/idlab/KGGenerationStep3b.svg" style="height: 50vh;">
            <div class="reference">https://dylanvanassche.be/assets/leveraging-wot-for-kg-generation</div>
          </section>

          <section>
            <img src="dist/img/idlab/KGGenerationStep4.svg" style="height: 50vh;">
            <div class="reference">https://dylanvanassche.be/assets/leveraging-wot-for-kg-generation</div>
          </section> -->
        </section>

        <!-- 101 -->
        <section>
          <section>
            <h2>YARRRML 101</h2>
          </section>

          <section>
            <p>
              Let's map a table like that found in
              <a href="./table-vs-graph.html#/2/5">Table vs. Graph</a> to RDF
            </p>

            <table>
              <thead>
                <tr>
                  <th>ID</th>
                  <th>First</th>
                  <th>Last</th>
                </tr>
              </thead>
              <tr>
                <td>1</td>
                <td>Mads</td>
                <td>Rasmussen</td>
              </tr>
              <tr>
                <td>2</td>
                <td>Philipp</td>
                <td>Dohmen</td>
              </tr>
              <tr>
                <td>3</td>
                <td>Manos</td>
                <td>Argyris</td>
              </tr>
            </table>
          </section>

          <section>
            <p>In CSV the table looks like this</p>
            <pre><code data-trim class="csv hljs" >
				ID,First,last
				1,Mads,Rasmussen
				2,Philipp,Dohmen
				3,Manos,Argyris
			</code></pre>
          </section>

          <section>
            <p>A simple YARRRML map would look like this</p>
            <pre><code data-trim class="yml hljs" data-line-numbers="|4-7|8|9-12|1-2">
prefixes:
  schema: http://schema.org/

mappings:
  person:
    sources:
      - ['input~csv']
    s: http://example.com/$(ID)
    po:
      - [a, schema:Person]
      - [schema:name, $(First)]
      - [schema:familyName, $(Last)]
			</code></pre>
            <a href="https://semantifyit.github.io/rml/" target="_blank"
              >Try it here</a
            >
          </section>

          <section>
            <p>The resulting RDF in Turtle syntax</p>
            <pre><code data-trim class="turtle hljs" data-line-numbers="|4-6">
@base: &lt;http://example.com/&gt; .
@prefix schema: &lt;http://schema.org/&gt; .

&lt;1&gt; a schema:Person ;
  schema:name "Mads" ;
  schema:familyName "Rasmussen" .
&lt;2&gt; a schema:Person ;
  schema:name "Philipp" ;
  schema:familyName "Dohmen" .
&lt;3&gt; a schema:Person ;
  schema:name "Manos" ;
  schema:familyName "Argyris" .
			</code></pre>
          </section>

          <section
            data-background-iframe="dist/html/cytoscape/rml1.html"
          ></section>

          <section
            data-background-iframe="dist/html/cytoscape/rml2.html"
          ></section>

          <section>
            <p>Another data source might specify the following</p>
            <pre><code data-trim class="json hljs" >
[
  {
    "id": "1",
    "knows": ["2", "3"]
  },
  {
    "id": "2",
    "knows": ["3"]
  },
  {
    "id": "3",
    "knows": ["2"]
  }
]
			</code></pre>
          </section>

          <section>
            <p>A simple YARRRML map would look like this</p>
            <pre><code data-trim class="yml hljs" data-line-numbers="|5-8|9|10-11|1-3">
prefixes:
  schema: http://schema.org/
  ex: http://example.com/

mappings:
  person:
    sources:
      - ['data.json~jsonpath', '$[*]']
    s: ex:$(id)
    po:
      - [schema:knows, ex:$(knows.*)~iri]
			</code></pre>
            <a href="https://rml.io/yarrrml/matey/" target="_blank"
              >Try it here</a
            >
          </section>

          <section
            data-background-iframe="dist/html/cytoscape/rml3.html"
          ></section>

          <section>
            <p>
              The challenge in doing these mappings is defining common
              identifiers
            </p>
          </section>
        </section>

        <!-- IRI resolution -->
        <section>
          <section>
            <h2>IRI resolution</h2>
          </section>

          <section>
            <div style="display: flex; justify-content: center">
              <cue-logo
                class="inline-logo"
                active="true"
                [continuous]="false"
                style="width: 100px"
              ></cue-logo>
            </div>
            <p>
              uses IRIs with special identifiers <br />derived from concatenated
              text strings.
            </p>
          </section>

          <section>
            <p>
              https://cue.qaecy.com/r/<span style="color: orange">{projectID}</span>/<span style="color: #2859e1">{resourceID}</span>
            </p>
          </section>

          <section>
            <p>
              <strong>Cue IRIs are dereferenceable:</strong> If you open it in a
              web browser, and you are allowed to view the resource, you will
              see something meaningful.
            </p>
          </section>

          <section>
            <p>Interactive resourceID generator</p>
            <iframe
              style="width: 500px; background: transparent"
              src="dist/html/id-builder/index.html"
              frameborder="0"
            ></iframe>
          </section>

          <section>
            <p>In the RML map we use a function for creating resource IDs</p>
            <pre><code data-trim class="yml hljs" data-line-numbers="11-12|">
prefixes:
  qcy: https://dev.qaecy.com/ont#
  qcy-e: https://dev.qaecy.com/enum#
  qcy-f: https://dev.qaecy.com/functions#
  qcy-r: https://cue.qaecy.com/r/555548e1-f6b2-43c1-af6e-3797ac3c2096/

mappings:
 person:
   sources:
     - ['input~csv']
   s:
     - function: qcy-f:contextIRI(ns = "qcy-r:", str1 = $(First), str2 = " ", str3 = $(Last), str4 = "https://dev.qaecy.com/enum#Person")
   po:
     - [a, qcy:CanonicalEntity]
     - [qcy-e:hasEntityCategory, qcy-e:Person~iri]
     - [qcy:value, $(First) $(Last)]
			    </code></pre>
          <p style="font-size: 1.4rem;">IRI built from eg. "<span style="font-style: italic;">Mads Rasmussenhttps://dev.qaecy.com/enum#Person</span>" <br><span style="font-size: 1.2rem;">-> 5f958fb3-9c9e-5e64-acdf-cfba21a5cd79</span></p>
          </section>

        </section>

        <section>
          <section>
            <h2>Filtering</h2>
          </section>

          <section>
            <p>In some cases there are rows that need to be filtered out</p>
          </section>

          <section>
            <p>For example, for classification codes in a hierachy</p>
          </section>

          <section>
            <p>Example from BIM7AA</p>
            <table>
              <thead>
                <tr>
                  <th>Code</th>
                  <th>Label</th>
                </tr>
                <tr>
                  <td>3</td>
                  <td>Complementary Building Parts</td>
                </tr>
                <tr>
                  <td>31</td>
                  <td>Exterior Walls, Complementary</td>
                </tr>
                <tr>
                  <td>311</td>
                  <td>Exterior Doors</td>
                </tr>
                <tr>
                  <td>312</td>
                  <td>Exterior Windows</td>
                </tr>
                <tr>
                  <td>313</td>
                  <td>Exterior doors, facade systems</td>
                </tr>
              </thead>
            </table>
          </section>

          <section>
            <p>In CSV the table looks like this</p>
            <pre><code data-trim class="text hljs" >
Code,"Label"
3,"Complementary Building Parts"
31,"Exterior Walls, Complementary"
311,"Exterior Doors"
312,"Exterior Windows"
313,"Exterior doors, facade systems"
			</code></pre>
          </section>

          <section>
            <p><strong>Condition:</strong> Code must consist of three digits</p>
            <pre><code data-trim class="yml hljs" data-line-numbers="13-17|">
prefixes:
  qcy: https://dev.qaecy.com/ont#
  qcy-e: https://dev.qaecy.com/enum#
  skos: http://www.w3.org/2004/02/skos/core#
  grel: http://users.ugent.be/~bjdmeest/function/grel.ttl#
  bim7aa: http://bim7aa.dk/no/

mappings:
 person:
   sources:
     - ['input~csv']
   s: bim7aa:$(Code)
   condition:
      function: grel:string_match
      parameters:
        - [grel:valueParameter, $(Code)]
        - [grel:p_string_find, "^\\d{3}$"]
   po:
     - [a, qcy:EntityCategory]
     - [a, skos:Concept]
     - [skos:notation, $(Code)]
     - [skos:prefLabel, $(Label)]
     - [skos:broader, qcy-e:BuildingElement~iri]
			    </code></pre>
          </section>

          <section>
            <p>Result</p>
            <pre><code data-trim class="turtle hljs" data-line-numbers="|6-9">
@prefix base: &lt;http://bim7aa.dk/no/&gt; .
@prefix qcy: &lt;https://dev.qaecy.com/ont#&gt; .
@prefix qcy-e: &lt;https://dev.qaecy.com/enum#&gt; .
@prefix skos: &lt;http://www.w3.org/2004/02/skos/core#&gt; .

&lt;311&gt; a skos:Concept , qcy:EntityCategory ;
    skos:broader qcy-e:BuildingElement ;
    skos:notation "311" ;
    skos:prefLabel "Exterior Doors" .
&lt;312&gt; a skos:Concept , qcy:EntityCategory ;
    skos:broader qcy-e:BuildingElement ;
    skos:notation "312" ;
    skos:prefLabel "Exterior Windows" .
&lt;313&gt; a skos:Concept , qcy:EntityCategory ;
    skos:broader qcy-e:BuildingElement ;
    skos:notation "313" ;
    skos:prefLabel "Exterior doors, facade systems" .
			    </code></pre>
          </section>

        </section>

        <!-- Perspectives -->
        <section>
          <section>
            <h2>Perspectives</h2>
          </section>

          <section>
            <p>A canonical entity could be a WoT device</p>
          </section>

          <section>
            <p>These can carry a "Thing Description"</p>
            <ul style="font-size: 1.4rem; line-height: 1.6rem;">
              <li style="margin-bottom: 1em;"><strong>Thing Metadata:</strong> Includes general details like name, description, domain-specific info, and optional semantic annotations for the Thing.​</li>
              <li style="margin-bottom: 1em;"><strong>Protocol Bindings:</strong> Specifies communication protocols (e.g., HTTP, CoAP, MQTT) via binding templates and media types for interaction affordances.​</li>
              <li><strong>Security and Authentication:</strong> Defines security schemes (e.g., Basic, Digest, OAuth2) with metadata for access control across resources.​</li>
            </ul>
            <div style="height: 2rem;"></div>
            <a style="font-size: 1.4rem;" href="https://www.w3.org/TR/wot-thing-description11/#:~:text=Thing%20Description%20generation%20from%20Thing%20Model" target="_blank">Example: Thing model MQTT</a>
          </section>
        </section>

        <!-- Next -->
        <section>
          <section>
            <h2>Next</h2>
          </section>

          <section>
            <ul>
              <li>
                Mapping can also include instructions for declarative
                authentication
              </li>
            </ul>
          </section>
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>

    <script src="dist/js/cue-ui/logo/runtime.js" type="module"></script>
    <script src="dist/js/cue-ui/logo/polyfills.js" type="module"></script>
    <script src="dist/js/cue-ui/logo/main.js" type="module"></script>
    <script src="dist/js/cue-ui/id-builder/main.js" type="module"></script>
    <script src="dist/js/cue-ui/id-builder/polyfills.js" type="module"></script>
    <script src="dist/js/cue-ui/id-builder/polyfills.js" type="module"></script>
    <script type="module">
      import { turtle } from "./plugin/highlight/turtle.js";
      import { sparql } from "./plugin/highlight/sparql.js";
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
        highlight: {
          beforeHighlight: (hljs) => {
            hljs.registerLanguage("turtle", (hljs) => turtle(hljs));
            hljs.registerLanguage("sparql", (hljs) => sparql(hljs));
          },
        },
      });
    </script>
  </body>
</html>
